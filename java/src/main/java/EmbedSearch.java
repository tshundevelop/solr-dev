import org.apache.solr.client.solrj.SolrClient;
import org.apache.solr.client.solrj.impl.HttpSolrClient;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.client.solrj.SolrRequest; // SolrRequestをインポート
import org.apache.solr.client.solrj.request.QueryRequest; // QueryRequestをインポート
import org.apache.solr.common.SolrDocument;
import org.apache.solr.common.SolrDocumentList;
import org.apache.solr.common.params.ModifiableSolrParams; // ModifiableSolrParamsをインポート

import java.util.List;
import java.util.ArrayList;
import java.util.Random;

public class EmbedSearch {

    public static void main(String[] args) {
        // Solr URL: Docker Composeのサービス名に合わせて調整
        String solrUrl = "http://solr:8983/solr/embedding";

        // SolrClientをtry-with-resourcesで初期化
        try (SolrClient solr = new HttpSolrClient.Builder(solrUrl).build()) {

            // 1024次元のランダムな浮動小数点数ベクトルを生成
            // float[] queryVector = generateRandomFloatArray(1024);
            double[] rawDoubleVector = {0.02426573447883129,0.015328140929341316,-0.03713243827223778,-0.047460682690143585,0.028473176062107086,-0.02617371454834938,0.021765021607279778,0.056003451347351074,0.035365115851163864,-0.001689779106527567,0.05044686794281006,0.02983827330172062,-0.06524692475795746,-0.03760356083512306,-0.0323726125061512,-0.023704105988144875,-0.017359351739287376,0.019589098170399666,0.020571136847138405,-0.018367325887084007,0.025157662108540535,-0.01935545727610588,-0.03255647048354149,-0.03788726031780243,-0.028699854388833046,-0.021493854001164436,-0.030310319736599922,-0.033925846219062805,-0.013882104307413101,-0.03444240987300873,-0.013672317378222942,0.01160007156431675,-0.011347301304340363,-0.024338601157069206,-0.0235365629196167,0.020554447546601295,0.056438591331243515,0.0038755307905375957,-0.021636178717017174,0.018895165994763374,-0.026774480938911438,0.03643994778394699,-0.011823172681033611,-0.03514450788497925,-0.013915727846324444,0.014419742859899998,0.05172925442457199,0.015566584654152393,-0.01935078203678131,0.03536338731646538,0.009938983246684074,0.025605736300349236,-0.009614843875169754,-0.02139674872159958,-0.02803044207394123,0.04776247963309288,-0.01991969905793667,0.008338003419339657,-0.04291333630681038,0.02175500988960266,-0.020585088059306145,-0.009973683394491673,0.03752659261226654,-0.02450585924088955,-0.03186912462115288,0.03458215296268463,0.03806612268090248,-0.0003850175708066672,-0.042545996606349945,0.02551725134253502,-0.0036933033261448145,0.035635389387607574,-0.017496095970273018,-0.017367210239171982,0.0013375887647271156,-0.025324983522295952,0.0565345324575901,0.010377930477261543,0.022432800382375717,-0.0402475968003273,0.12482209503650665,0.006111596245318651,0.0040911720134317875,-0.018654840067029,0.009561801329255104,0.04794496297836304,0.039428699761629105,-0.0016574058681726456,0.043127305805683136,0.005422843154519796,-0.027366334572434425,0.04735935106873512,0.035822656005620956,-0.020882248878479004,-0.01866917870938778,-0.016223343089222908,0.015364052727818489,0.04839230328798294,-0.004945647902786732,-0.02918410114943981,0.01154333632439375,-0.0019549387507140636,0.024475736543536186,-0.06109890341758728,-0.028097430244088173,0.0180679801851511,0.014638479799032211,0.038463614881038666,0.0061302511021494865,-0.005132133141160011,0.031206466257572174,0.07620873302221298,0.005737000610679388,-0.01799793727695942,-0.04398637264966965,0.0010691421339288354,0.00376149732619524,-0.023888081312179565,0.0035291516687721014,0.045761264860630035,0.01677335426211357,0.06294456124305725,-0.0073616523295640945,-0.04722359776496887,0.03634225204586983,-0.020485617220401764,0.018299052491784096,0.04258088394999504,-0.028942976146936417,0.045898571610450745,0.01910933293402195,0.028102073818445206,-0.04137151688337326,-0.030815424397587776,-0.06179307401180267,-0.013293161056935787,-0.020256876945495605,-0.03183376044034958,-0.0017761497292667627,0.01845916174352169,-0.011332890018820763,0.034251611679792404,0.036181047558784485,-0.028839534148573875,-0.030575145035982132,-0.07166674733161926,-0.022326692938804626,0.03865502402186394,-0.011471549980342388,-0.015656637027859688,-0.018256615847349167,-0.017761118710041046,-0.003234013682231307,0.016115959733724594,0.0025253468193113804,-0.020711103454232216,0.018533647060394287,0.06295093894004822,0.03758476674556732,0.0021088002249598503,-0.034112658351659775,-0.04290672019124031,-0.010374329052865505,-0.019997652620077133,-0.01110836397856474,-0.02187204919755459,0.034502387046813965,0.019200455397367477,-0.0029581363778561354,-0.0023256202694028616,-0.024999089539051056,-0.07549835741519928,0.04249702766537666,-0.062284812331199646,-0.026799630373716354,0.014440496452152729,0.021984728053212166,0.027880750596523285,0.04312635213136673,-0.0411178320646286,0.019564567133784294,0.04031476005911827,0.0381527878344059,-0.03285105153918266,-0.04155521094799042,0.04867733642458916,0.03492460772395134,0.03028993494808674,0.048180751502513885,0.021745715290308,0.025463175028562546,0.0036310807336121798,-0.04735243320465088,0.05322488024830818,-0.019637364894151688,0.04581766948103905,0.04111049324274063,0.05445164069533348,-0.033839162439107895,-0.042731814086437225,-0.008710324764251709,0.06569964438676834,-0.06919831037521362,0.008582268841564655,0.001558201969601214,-0.014317239634692669,-0.0377299003303051,-0.044091664254665375,0.03092692419886589,-0.04577058553695679,-0.06709166616201401,-0.012360098771750927,0.02524145133793354,0.027944454923272133,-0.019542884081602097,-0.029190625995397568,-0.023937974125146866,-0.002262918511405587,0.020222889259457588,-0.00105387344956398,0.0031410432420670986,0.0596887581050396,0.015572081319987774,0.03438260406255722,0.04286838322877884,0.012626778334379196,0.038740500807762146,0.04512640833854675,0.011267425492405891,-0.0114810885861516,0.008157639764249325,0.034016069024801254,-0.053307466208934784,-0.015521799214184284,0.007826250046491623,3.866319821099751e-05,-0.026499811559915543,-0.01165590900927782,0.048280470073223114,0.026354333385825157,-0.03954315558075905,0.03131742402911186,0.008456230163574219,-0.023504652082920074,0.004592272453010082,-0.03434012457728386,0.0060955979861319065,-0.02846498228609562,0.017241036519408226,-0.009727581404149532,0.025077903643250465,0.030668869614601135,-0.010504497215151787,-0.03522791713476181,0.02817719243466854,0.04149545356631279,0.03980650752782822,-0.009709211066365242,0.00050133909098804,-0.020263921469449997,0.015291242860257626,0.02096668817102909,-0.027460727840662003,0.025931119918823242,0.03407533839344978,0.005756374914199114,-0.005562641657888889,-0.006145192310214043,-0.02584109455347061,-0.044062040746212006,-0.02939424477517605,-0.040312547236680984,-0.05205974727869034,-0.030687492340803146,-0.03668324276804924,0.017631398513913155,-0.043609339743852615,-0.004345077555626631,-0.001632101833820343,-0.0036205125506967306,-0.015326851978898048,-0.013803033158183098,0.02442389540374279,-0.03714261204004288,-0.004891423042863607,0.020460011437535286,0.014555192552506924,-0.028750991448760033,0.004039716441184282,0.009506517089903355,0.0267756599932909,-0.018237991258502007,0.09089579433202744,0.010721570812165737,0.0323558934032917,0.0310603566467762,-0.04179512336850166,0.007278311066329479,-0.04491303116083145,0.011972716078162193,-0.010437913239002228,-0.04261136054992676,0.017691195011138916,0.05301670357584953,-0.033121634274721146,-0.035128381103277206,-0.025376353412866592,0.006924464832991362,-0.06070166453719139,0.02784241922199726,0.056267283856868744,0.04671958461403847,0.016744371503591537,-0.07480181753635406,-0.04133925214409828,-0.010511679574847221,-0.0545218363404274,0.05900350585579872,-0.016397912055253983,0.016255682334303856,-0.041242536157369614,-0.01075175404548645,0.016116391867399216,0.010903386399149895,0.04105893522500992,0.010370388627052307,0.011807829141616821,-0.02230061963200569,0.019358275458216667,-0.04374702274799347,0.027696708217263222,-0.026616428047418594,0.004259982146322727,0.03356585279107094,-0.0239963848143816,0.027816837653517723,-0.026342332363128662,0.033625610172748566,0.05272163078188896,-0.02295323647558689,-0.0010391175746917725,-0.016205990687012672,-0.039918575435876846,0.00047699015703983605,0.015432102605700493,-0.03222674876451492,0.006176072638481855,-0.01676204614341259,0.02049175277352333,0.02049221843481064,0.010139860212802887,-0.010500084608793259,0.017748024314641953,0.017244188115000725,-0.03212900459766388,0.04683740437030792,-0.001432724529877305,-0.0004519212816376239,0.015921780839562416,-0.037777382880449295,0.004133895039558411,0.018699366599321365,0.03624247759580612,-0.03213360533118248,-0.03658965229988098,0.0016321780858561397,0.02403378114104271,-0.037734489887952805,-0.04475131630897522,-0.044604524970054626,0.0400262326002121,-0.0036069480702281,-0.0013372707180678844,0.0110862348228693,0.02021005190908909,-0.013300561346113682,-0.006961974781006575,-0.008917288854718208,-0.005379450973123312,-0.037876516580581665,-0.027500426396727562,-0.034726306796073914,0.022481514140963554,-0.030527429655194283,0.0017772751161828637,-0.016592606902122498,0.11255370080471039,0.005787843372672796,0.03978602588176727,-0.02951939031481743,-0.02134939841926098,0.006027728784829378,0.026853520423173904,0.006314580794423819,0.01672547683119774,0.044497620314359665,-0.03571438044309616,-0.0104006826877594,0.04948180913925171,-0.031878262758255005,0.01797303557395935,0.02952631376683712,0.0006235839682631195,0.05885786563158035,0.07550663501024246,-0.02709612436592579,0.04275587201118469,-0.005650305654853582,0.014641491696238518,0.005366980098187923,-0.04880661517381668,-0.05159113556146622,-0.0015186421805992723,0.04382708668708801,-0.042041096836328506,0.0024744789116084576,-0.031573694199323654,-0.004679840058088303,-0.033771220594644547,-0.034612707793712616,0.013883784413337708,0.012771080248057842,0.021786529570817947,-0.030901536345481873,0.049582064151763916,-0.02176050655543804,-0.005866871681064367,0.016070585697889328,-0.02511337399482727,0.0404902845621109,-0.017895229160785675,0.03559502959251404,0.03745220974087715,-0.0008133756346069276,-0.036121077835559845,0.020388050004839897,0.018668806180357933,0.011864892207086086,-0.021167157217860222,-0.019049091264605522,-0.013038857840001583,-0.04256214201450348,-0.02095569111406803,-0.02799864672124386,0.01132033858448267,0.01056293398141861,0.011419467628002167,0.023717664182186127,-0.028052356094121933,-0.03598983958363533,0.010843420401215553,0.03014610894024372,-0.032597072422504425,-0.035867538303136826,-0.03593834862112999,0.025421395897865295,-0.03716585040092468,-0.024672098457813263,-0.026819096878170967,0.00888030230998993,0.017341412603855133,-0.035567160695791245,-0.030083350837230682,0.04876499995589256,0.044248029589653015,-0.009794874116778374,0.045370060950517654,-0.02848857268691063,-0.011371543630957603,0.006698479875922203,0.06127190589904785,-0.00901369471102953,0.016651131212711334,0.009575726464390755,-0.012633825652301311,0.02513016201555729,0.019972024485468864,0.012646780349314213,-0.03253167122602463,0.0653793215751648,0.02515334263443947,-0.07243581861257553,0.039049163460731506,0.014922530390322208,-0.015902079641819,-0.05298396572470665,-0.002816714346408844,0.011495341546833515,-0.0335305780172348,-0.04827773571014404,-0.00959812942892313,-0.021817032247781754,0.03281012549996376,0.045509353280067444,0.019745541736483574,-0.003410519566386938,0.03935914486646652,0.01086484920233488,0.016360173001885414,-0.007125210948288441,0.07739464193582535,0.029064325615763664,0.023725999519228935,-0.05863591656088829,-0.00012411404168233275,0.02418162301182747,-0.04649513214826584,0.05265340954065323,-0.029808804392814636,0.06659664213657379,-0.040342770516872406,0.05117395520210266,-0.03274620696902275,0.006124893669039011,0.03234006091952324,0.027406634762883186,0.009323238395154476,-0.027434784919023514,-0.03219037503004074,0.01925245299935341,-0.004281270317733288,-0.03872331231832504,0.04926212877035141,-0.0216203760355711,-0.007584260776638985,0.016513224691152573,-0.03574303165078163,0.014954214915633202,-0.03508315235376358,0.03661864623427391,0.03673556447029114,0.02346344105899334,-0.0014572988729923964,-0.03770165890455246,0.006765096914023161,-0.03045358695089817,0.03314897045493126,-0.04677353426814079,0.02591526135802269,0.025814346969127655,-0.011854159645736217,-0.02178781107068062,0.01653234101831913,0.04054073616862297,0.02384377270936966,-0.051818981766700745,-0.05658770352602005,-0.017322981730103493,-7.575942436233163e-05,0.10304617881774902,0.04613681510090828,0.0412258505821228,-0.02383875660598278,0.009654057212173939,0.03881622105836868,0.04258548095822334,-0.018123745918273926,-0.04203630983829498,-0.00786046776920557,0.03331264108419418,0.030716313049197197,-0.03126377984881401,-0.027278009802103043,0.020859982818365097,-0.02027120813727379,0.01414976641535759,-0.02673347108066082,0.025143876671791077,0.03146180883049965,-0.03479980304837227,-0.020450778305530548,0.020776987075805664,0.004241331946104765,-0.04767056182026863,-0.033149853348731995,0.034995052963495255,-0.02820490300655365,0.06904824823141098,-0.012435386888682842,0.028391391038894653,-0.039385877549648285,0.015586936846375465,0.011260557919740677,0.02193114347755909,-0.01174465287476778,-0.017817934975028038,0.028722386807203293,-0.04872044548392296,-0.012149184942245483,-0.004794994834810495,-0.043781451880931854,-0.02293260768055916,-0.005392859224230051,0.02436249889433384,0.051667727530002594,0.026662416756153107,-0.008616805076599121,-0.02812168188393116,0.026906246319413185,0.03605033457279205,0.0062021599151194096,0.03350382670760155,0.022910665720701218,0.056515272706747055,0.014594921842217445,-0.022691860795021057,0.03062378242611885,0.022738726809620857,0.01862369105219841,-0.037451259791851044,-0.05234810709953308,-0.04240148514509201,0.033953458070755005,0.019852153956890106,-0.017674056813120842,-0.03935213387012482,-0.04263083264231682,-0.04268288239836693,-0.015045735985040665,-0.027903957292437553,-0.025870895013213158,-0.012181244790554047,0.0020577129907906055,0.022480512037873268,0.019858578220009804,-0.028970589861273766,0.013105794787406921,-0.032666727900505066,0.03688123822212219,-0.031330656260252,0.006823620293289423,0.023044878616929054,-0.035391319543123245,-0.020184136927127838,0.029264777898788452,0.01863686554133892,-0.0028109936974942684,-0.02426202781498432,0.014932717196643353,0.046230249106884,-0.02427263930439949,-0.052105724811553955,0.013047654181718826,-0.027760813012719154,-0.041321296244859695,-0.034396663308143616,0.017945365980267525,-0.013216106221079826,-0.04047372564673424,-0.00380474841222167,-0.02442670427262783,0.03614505007863045,0.03240421041846275,-0.03730035573244095,0.006084327585995197,-0.05071032792329788,0.03567354381084442,-0.030688682571053505,-0.05932124704122543,-0.03917069733142853,0.04660942032933235,0.00032760424073785543,-0.02201828360557556,-0.03276362270116806,-0.006473768036812544,-0.039633043110370636,-0.0047147213481366634,0.044426217675209045,-0.01959218643605709,0.004114361945539713,-0.012208675965666771,0.034914687275886536,-0.03615204989910126,0.039575282484292984,-0.003446455579251051,-0.016376398503780365,-0.046972502022981644,0.018917951732873917,-0.012254075147211552,-0.020857715979218483,-0.019527699798345566,-0.053678058087825775,-0.03201601281762123,-0.011254374869167805,-0.015782000496983528,-0.026739420369267464,0.014895610511302948,-0.03548062965273857,-0.035810068249702454,-0.058294884860515594,-0.005207154434174299,0.029754584655165672,-0.022887971252202988,-0.0004293569945730269,0.06263766437768936,0.03185439854860306,-0.018728988245129585,-0.06762779504060745,0.020067987963557243,0.03161933645606041,-0.020343858748674393,-0.02270321734249592,0.009835786186158657,-0.01154874823987484,-0.0310356505215168,0.025212280452251434,-0.023083539679646492,-0.024435119703412056,0.005430020857602358,0.015521991066634655,0.025366364046931267,0.0194086991250515,0.042843297123909,0.042364686727523804,0.03685379400849342,-0.008284288458526134,0.03281044587492943,0.004099629353731871,-0.038179490715265274,-0.0087000522762537,-0.04414653033018112,-0.029825933277606964,-0.0289325974881649,-0.027694933116436005,-0.04963678866624832,-0.03190229833126068,-0.03730228170752525,0.03541814163327217,0.027382032945752144,-0.04720141738653183,0.033659130334854126,0.007239584345370531,0.0019651318434625864,0.002552165649831295,-0.017802119255065918,-0.007538513280451298,-0.04028169810771942,0.028531771153211594,-0.01922871358692646,0.009106638841331005,-0.021339016035199165,0.030585115775465965,-0.044620905071496964,0.02151980996131897,0.014755832962691784,-0.03082866407930851,-0.025994567200541496,0.000774467654991895,0.026371899992227554,-0.016717014834284782,-0.028303630650043488,0.03551911190152168,-0.026230452582240105,0.00011497359082568437,-0.022673500701785088,0.00515076145529747,-0.04042253643274307,0.0076488894410431385,-0.049641452729701996,-0.019397275522351265,-0.04980117827653885,0.06124570593237877,-0.05768021568655968,0.0032484647817909718,0.00994759239256382,0.007726710755378008,0.002766227349638939,-0.0528816357254982,-0.052742935717105865,-0.030788982287049294,0.017490902915596962,-0.02613709680736065,-0.02081604301929474,0.028138261288404465,-0.0017272178083658218,0.021768802776932716,-0.019909733906388283,0.060018569231033325,-0.02435530349612236,0.026522411033511162,-0.06980773061513901,-0.01129931304603815,-0.005262352991849184,-0.03893772512674332,-0.017001347616314888,-0.013803809881210327,-0.03693617880344391,0.02143521048128605,0.03989605978131294,-0.046940840780735016,0.03240248188376427,0.005260528530925512,0.016284005716443062,0.00988373626023531,-0.01064322143793106,0.05418037250638008,0.04467546194791794,-0.002320443280041218,0.010491697117686272,0.0005389605648815632,0.024286190047860146,-0.02567148394882679,-0.0033271308057010174,0.007875727489590645,0.027282262220978737,0.02229817397892475,0.0294538252055645,0.018732493743300438,-0.0629766583442688,-0.060991086065769196,-0.003746815724298358,-0.0011686168145388365,0.009177272208034992,0.045282814651727676,-0.022085804492235184,0.007176089566200972,-0.02211247943341732,-0.0021378365345299244,-0.024205125868320465,0.004228266887366772,-0.03867360204458237,0.031297486275434494,-0.03689704090356827,0.035684362053871155,-0.02677169255912304,0.0321974977850914,0.0023925320710986853,-0.019058071076869965,0.02110857516527176,-0.030279843136668205,-0.05540141835808754,-0.02189883403480053,0.024537496268749237,0.02485673874616623,0.0427391491830349,0.05119777470827103,0.009461957961320877,-0.011396429501473904,0.011510348878800869,0.05376217141747475,0.0031328604090958834,-0.028057005256414413,-0.028012648224830627,-0.013778199441730976,-0.0048716808669269085,-0.02186218462884426,-0.05722017213702202,0.005510648712515831,-0.021012336015701294,0.020510263741016388,0.027482114732265472,-0.04721396788954735,0.027866289019584656,0.021490130573511124,0.01515534333884716,-0.04950323700904846,-0.006540278904139996,0.007077401503920555,0.011158247478306293,0.0091073177754879,-0.02117176167666912,-0.00853450782597065,0.004081913270056248,0.018371960148215294,-0.02209935337305069,0.026448339223861694,-0.025726590305566788,-0.024353770539164543,-0.057743024080991745,0.01856563426554203,-0.04696330055594444,0.023546652868390083,0.011832834221422672,-0.027148958295583725,-0.013143765740096569,-0.018089400604367256,-0.0424380749464035,-0.017240719869732857,0.0009959777817130089,0.021733306348323822,-0.04512869194149971,-0.01867278292775154,-0.010138429701328278,-0.0023699786979705095,-0.00286356033757329,0.013856316916644573,0.05579724162817001,-0.021160537376999855,0.05404600128531456,-0.04921459034085274,-0.04236181825399399,-0.03045051172375679,-0.024609796702861786,-0.0377383679151535,-0.04359808936715126,0.022856859490275383,-0.008567235432565212,0.012546265497803688,-0.033612679690122604,0.023344065994024277,0.015282652340829372,-0.022953422740101814,0.048511430621147156,0.00372761650942266,0.012960732914507389,-0.04977954551577568,0.02139953151345253,-0.03863972797989845,-0.0005729690310545266,-0.049129802733659744,0.03700834512710571,-0.039882004261016846,0.0565357431769371,-0.03470296412706375,-0.013690324500203133,-0.03288687393069267,-0.016080141067504883,0.06445197761058807,-0.025624848902225494,0.005328597966581583,-0.022488456219434738,-0.036354467272758484,-0.026387987658381462,-0.023389596492052078,-0.015424402430653572,0.013351665809750557,-0.023584146052598953,-0.04319655895233154,-0.04144369810819626,-0.04894223064184189,0.0220194011926651,-0.029766349121928215,-0.032209597527980804,0.02608351968228817,0.016341304406523705,0.022378256544470787,-0.017918849363923073,0.00920681282877922,0.051172371953725815,0.007365689612925053,-0.009988629259169102,-0.010841889306902885,-0.045707058161497116,0.03835342451930046,0.017677847295999527,-0.044676922261714935,0.008204487152397633,0.022868046537041664,-0.021294306963682175,-0.0010661585256457329,0.04679204896092415,0.0213552787899971,-0.07013729959726334,0.04226536303758621,0.010685198940336704,-0.0082404725253582,0.048080697655677795,0.03062322735786438,0.03787898272275925,0.015066063962876797,0.01673283614218235,0.00937105342745781,-0.014332562685012817,0.0035180847626179457,0.030719509348273277,0.06544294208288193,0.009922395460307598,0.01293871644884348,-0.008191745728254318,0.035757508128881454,-0.026059675961732864,0.012896628119051456,-0.051851786673069,0.06188825145363808,0.043919820338487625,-0.034104954451322556,-0.030619032680988312,-0.008501931093633175,-0.049051497131586075,0.008660422638058662,0.010523403063416481,0.011071310378611088,0.018247636035084724,-0.0310654416680336,-0.04264470189809799,-0.024319717660546303,-0.02655886299908161,0.005333005450665951,-0.015354154631495476,0.04337753728032112,0.038803014904260635,-0.035076241940259933,0.013697296380996704,0.028851453214883804,0.03216118738055229,0.04575659707188606,0.008077175356447697,0.0012144898064434528,0.003934232052415609,0.012884973548352718,0.029849549755454063,0.049475718289613724,-0.039566900581121445,-0.013605584390461445,-0.011518766172230244,0.02320990152657032,-0.028658052906394005,0.007210822775959969,-0.03874978795647621,-0.022892970591783524,-0.0004288143536541611,0.03573794290423393,0.03332573547959328,0.019367454573512077,-0.023382190614938736,-0.05556725338101387,0.04038117453455925,-0.012871545739471912,0.0035576869267970324,0.02726328931748867,0.006555065046995878,-0.014204621315002441,-0.003737319028005004,0.019473569467663765};
            System.out.println(rawDoubleVector.length);
            // double[] から float[] への変換とキャスト
            float[] queryVector = new float[rawDoubleVector.length];
            for (int i = 0; i < rawDoubleVector.length; i++) {
                queryVector[i] = (float) rawDoubleVector[i]; // ここで明示的なキャスト
            }

            // float配列をJSON文字列に変換
            String vectorString = floatArrayToJson(queryVector);

            // SolrQueryではなくModifiableSolrParamsを使用し、パラメータを設定
            ModifiableSolrParams params = new ModifiableSolrParams();
            params.set("q", "*:*"); // メインのクエリ。ベクトル検索では通常"* :*"
            params.set("rows", 10); // 取得するドキュメント数

            // {!knn}パーサーをfq（フィルタークエリ）として設定
            // 'text_vec' はSolrスキーマで定義したベクトルフィールド名に合わせる
            // ベクトル文字列は引用符で囲む必要がある
            params.set("q", "{!knn f=title_vec topK=5}" + vectorString);

            // QueryRequestオブジェクトを作成し、POSTメソッドを明示的に指定
            QueryRequest queryRequest = new QueryRequest(params);
            queryRequest.setMethod(SolrRequest.METHOD.POST); // ここでPOSTメソッドを指定！

            // クエリを実行
            // SolrClient.request()メソッドにQueryRequestオブジェクトを渡す
            QueryResponse response = queryRequest.process(solr);

            // 結果を取得し、表示
            SolrDocumentList docs = response.getResults();
            System.out.println("Found " + docs.getNumFound() + " documents:");
            for (SolrDocument doc : docs) {
                System.out.println("ID: " + doc.getFieldValue("id") + ", Score: " + doc.getFieldValue("score"));
                // 必要に応じて他のフィールドも表示
                // System.out.println("Doc: " + doc);
            }

        } catch (Exception e) {
            System.err.println("Solrとの通信中にエラーが発生しました:");
            e.printStackTrace();
        }
    }

    private static float[] generateRandomFloatArray(int size) {
        Random random = new Random();
        float[] array = new float[size];
        for (int i = 0; i < size; i++) {
            array[i] = random.nextFloat();
        }
        return array;
    }

    private static String floatArrayToJson(float[] array) {
        StringBuilder sb = new StringBuilder("[");
        for (int i = 0; i < array.length; i++) {
            sb.append(array[i]);
            if (i < array.length - 1) {
                sb.append(", ");
            }
        }
        sb.append("]");
        return sb.toString();
    }
}
